name: run game Y 1
run-name: ${{ github.actor }} - build

on: 
  workflow_dispatch:

jobs:
    build: 
      runs-on: ubuntu-latest
      permissions: read-all
      steps:
        - uses: actions/checkout@v3
        - run: |
            RESPONSE_API=$(curl -L\
              -H "Accept: application/vnd.github+json"\
              -H "Authorization: token ${{ secrets.PAT }}"\
              -H "X-GitHub-Api-Version: 2022-11-28"\
              https://api.github.com/users/tmslpm/gists)
            echo $RESPONSE_API > gist_data.last.json

        - name: Make Github commit
          run: |
            git config --local user.email "github-actions[bot]@users.noreply.github.com"
            git config --local user.name "github-actions[bot]"
            git add .
            git commit -m "get all gist and store in gist_data.last.json (github-actions)"

        - name: Make Github push
          uses: ad-m/github-push-action@master
          with:
            github_token: ${{ secrets.GITHUB_TOKEN }}
            branch: main